(async()=>{const I=""+new URL("wasm_game_of_rust_bg-DhXFd7Ln.wasm",import.meta.url).href,U=async(e={},t)=>{let n;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let _;if(typeof Buffer=="function"&&typeof Buffer.from=="function")_=Buffer.from(r,"base64");else if(typeof atob=="function"){const l=atob(r);_=new Uint8Array(l.length);for(let s=0;s<l.length;s++)_[s]=l.charCodeAt(s)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(_,e)}else{const r=await fetch(t),_=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&_.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,e);else{const l=await r.arrayBuffer();n=await WebAssembly.instantiate(l,e)}}return n.instance.exports};let i;function W(e){i=e}const B=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let F=new B("utf-8",{ignoreBOM:!0,fatal:!0});F.decode();let v=null;function y(){return(v===null||v.byteLength===0)&&(v=new Uint8Array(i.memory.buffer)),v}function M(e,t){return e=e>>>0,F.decode(y().subarray(e,e+t))}let T=0;const P=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let p=new P("utf-8");const j=typeof p.encodeInto=="function"?function(e,t){return p.encodeInto(e,t)}:function(e,t){const n=p.encode(e);return t.set(n),{read:e.length,written:n.length}};function q(e,t,n){if(n===void 0){const u=p.encode(e),b=t(u.length,1)>>>0;return y().subarray(b,b+u.length).set(u),T=u.length,b}let r=e.length,_=t(r,1)>>>0;const l=y();let s=0;for(;s<r;s++){const u=e.charCodeAt(s);if(u>127)break;l[_+s]=u}if(s!==r){s!==0&&(e=e.slice(s)),_=n(_,r,r=s+e.length*3,1)>>>0;const u=y().subarray(_+s,_+r),b=j(e,u);s+=b.written,_=n(_,r,s,1)>>>0}return T=s,_}let f=null;function E(){return(f===null||f.buffer.detached===!0||f.buffer.detached===void 0&&f.buffer!==i.memory.buffer)&&(f=new DataView(i.memory.buffer)),f}const k=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>i.__wbg_universe_free(e>>>0,1));class x{static __wrap(t){t=t>>>0;const n=Object.create(x.prototype);return n.__wbg_ptr=t,k.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,k.unregister(this),t}free(){const t=this.__destroy_into_raw();i.__wbg_universe_free(t,0)}get width(){return i.__wbg_get_universe_width(this.__wbg_ptr)>>>0}set width(t){i.__wbg_set_universe_width(this.__wbg_ptr,t)}get height(){return i.__wbg_get_universe_height(this.__wbg_ptr)>>>0}set height(t){i.__wbg_set_universe_height(this.__wbg_ptr,t)}width(){return i.universe_width(this.__wbg_ptr)>>>0}height(){return i.universe_height(this.__wbg_ptr)>>>0}cells(){return i.universe_cells(this.__wbg_ptr)>>>0}set_width(t){i.universe_set_width(this.__wbg_ptr,t)}set_height(t){i.universe_set_height(this.__wbg_ptr,t)}tick(){i.universe_tick(this.__wbg_ptr)}toggle_cell(t,n){i.universe_toggle_cell(this.__wbg_ptr,t,n)}static new(){const t=i.universe_new();return x.__wrap(t)}}function V(e,t){let n,r;try{n=e,r=t,console.error(M(e,t))}finally{i.__wbindgen_free(n,r,1)}}function z(){return new Error}function X(){return Math.random()}function $(e,t){const n=t.stack,r=q(n,i.__wbindgen_malloc,i.__wbindgen_realloc),_=T;E().setInt32(e+4*1,_,!0),E().setInt32(e+4*0,r,!0)}function G(){const e=i.__wbindgen_export_3,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}function Y(e,t){throw new Error(M(e,t))}URL=globalThis.URL;const o=await U({"./wasm_game_of_rust_bg.js":{__wbg_new_8a6f238a6ece86ea:z,__wbg_stack_0ed75d68575b0f3c:$,__wbg_error_7534b8e9a36f1ab4:V,__wbg_random_3ad904d98382defe:X,__wbindgen_throw:Y,__wbindgen_init_externref_table:G}},I),R=o.memory,N=o.init_panic_hook,Z=o.__wbg_universe_free,H=o.__wbg_get_universe_width,J=o.__wbg_set_universe_width,K=o.__wbg_get_universe_height,Q=o.__wbg_set_universe_height,ee=o.universe_width,te=o.universe_height,ne=o.universe_cells,re=o.universe_set_width,_e=o.universe_set_height,ie=o.universe_tick,se=o.universe_toggle_cell,oe=o.universe_new,ce=o.__wbindgen_free,ae=o.__wbindgen_malloc,le=o.__wbindgen_realloc,ue=o.__wbindgen_export_3,S=o.__wbindgen_start,de=Object.freeze(Object.defineProperty({__proto__:null,__wbg_get_universe_height:K,__wbg_get_universe_width:H,__wbg_set_universe_height:Q,__wbg_set_universe_width:J,__wbg_universe_free:Z,__wbindgen_export_3:ue,__wbindgen_free:ce,__wbindgen_malloc:ae,__wbindgen_realloc:le,__wbindgen_start:S,init_panic_hook:N,memory:R,universe_cells:ne,universe_height:te,universe_new:oe,universe_set_height:_e,universe_set_width:re,universe_tick:ie,universe_toggle_cell:se,universe_width:ee},Symbol.toStringTag,{value:"Module"}));W(de);S();const c=5,we="#CCCCCC",ge="#FFFFFF",fe="#000000",d=document.querySelector("canvas#game-of-life-canvas"),a=d.getContext("2d");console.log(d);const h=x.new();console.log(h);const w=h.width(),g=h.height();d.width=c*w;d.height=c*g;d.style.width=`${c*w}px`;d.style.height=`${c*g}px`;const L=window.devicePixelRatio;a.scale(L,L);const C=document.querySelector("#play-pause");let m=null;const A=()=>{h.tick(),D(),O(),m=requestAnimationFrame(A)};requestAnimationFrame(A);const D=()=>{a.beginPath(),a.strokeStyle=we;for(let e=0;e<=w;e++)a.moveTo(e*(c+1)+1,0),a.lineTo(e*(c+1)+1,(c+1)*g+1);for(let e=0;e<=g;e++)a.moveTo(0,e*(c+1)+1),a.lineTo((c+1)*w+1,e*(c+1)+1);a.stroke()},he=(e,t)=>e*w+t,be=(e,t)=>{const n=Math.floor(e/32),r=e%32>>3,_=e%8,l=n*4+r,s=1<<_;return(t[l]&s)!==0},O=()=>{const e=h.cells(),t=new Uint8Array(R.buffer,e,w*g/8);a.beginPath();for(let n=0;n<g;n++)for(let r=0;r<w;r++){const _=he(n,r);a.fillStyle=be(_,t)?fe:ge,a.fillRect(r*(c+1)+1,n*(c+1)+1,c,c)}a.stroke()};if(!C)throw new Error("Play button not found");const me=()=>{C.textContent="||",A()},ve=()=>{if(!m)throw new Error("Animation not found");C.textContent=">",cancelAnimationFrame(m),m=null},ye=()=>m===null;C.addEventListener("click",()=>{ye()?me():ve()});d.addEventListener("click",e=>{const t=d.getBoundingClientRect(),n=d.width/t.width,r=d.height/t.height,_=(e.clientX-t.left)*n,l=(e.clientY-t.top)*r,s=Math.min(Math.floor(l/(c+1)),g-1),u=Math.min(Math.floor(_/(c+1)),w-1);h.toggle_cell(s,u),D(),O()})})();